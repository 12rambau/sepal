- name: Build Operations server
  hosts: all
  user: vagrant
  become: yes
  gather_facts: true

  vars_files:
    - "{{ secret_vars_file }}"

  roles:
    - { role: docker-registry }
    - { role: ansible }

    - { role: build-module, module: jenkins }
    - { role: build-module, module: nginx }
    - { role: build-module, module: riemann-server }
    - { role: build-module, module: riemann-dash }

    - { role: run-module, module: jenkins }
    - { role: run-module, module: nginx }
    - { role: run-module, module: riemann-server }
    - { role: run-module, module: riemann-dash }
